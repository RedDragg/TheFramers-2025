{% layout "server/layouts/base.liquid" %}

{% block content %}
<main>

{% comment %} 
<section class="data-scroll">
  <ul class="home-data">

    {% assign unique_types = [] %}
    {% for type in allEventTypes %}
      {% if type.nl and type.nl != "" and type.nl != blank %}
        {% unless unique_types contains type.nl %}
          {% assign unique_types = unique_types | push: type.nl %}

          {% for item in allEvents %}
            {% if item.event.type_nl == type.nl and item.imageUrl and item.imageUrl != "" and item.imageUrl != blank %}
              {% assign type_class = type.nl | downcase | replace: " ", "-" | replace: "'", "" | replace: ",", "" %}
              <li class="item" tabindex="0">
                <a href="/archive/{{ item.event.uuid }}">
                  <div class="type-header">
                    <strong>{{ item.event.title_nl }}</strong> 
                    <h2 class="type-label {{ type_class }}">{{ type.nl }}</h2>
                  </div>
                  <img src="{{ item.imageUrl }}" alt="{{ item.event.title_nl }}" class="category-image" loading="lazy">
                </a>
              </li>
            {% endif %}
          {% endfor %}

        {% endunless %}
      {% endif %}
    {% endfor %}

  </ul>
</section> {% endcomment %}


<section class="data-scroll">
  <ul class="home-data">

    {% assign unique_types = [] %}
    {% for type in allEventTypes %}
      {% if type.nl and type.nl != "" and type.nl != blank %}
        {% unless unique_types contains type.nl %}
          {% assign unique_types = unique_types | push: type.nl %}

          {% assign matching_items = allEvents | where: "event.type_nl", type.nl %}
          {% assign items_with_image = matching_items | where_exp: "item", "item.imageUrl and item.imageUrl != ''" %}
          {% assign project_count = matching_items | size %}
          {% assign sample_images = items_with_image | slice: 0, 24 %}
          {% assign type_class = type.nl | downcase | replace: " ", "-" | replace: "'", "" | replace: ",", "" %}

          {% if sample_images.size > 0 %}
            <li class="item" tabindex="0">
              <div class="type-header">
                <strong>{{ project_count }} projects</strong>
                <h2 class="type-label {{ type_class }}">{{ type.nl }}</h2>
              </div>
              <div class="image-grid">
                {% for img in sample_images %}
                  <a href="/archive/{{ img.event.uuid }}">
                    <img src="{{ img.imageUrl }}" alt="{{ img.event.title_nl | escape }}" class="category-image-grid" loading="lazy">
                  </a>
                {% endfor %}
              </div>
            </li>
          {% endif %}

        {% endunless %}
      {% endif %}
    {% endfor %}

  </ul>
</section>



{% comment %} 
<section class="data-scroll">
  <ul class="home-data">

    {% assign unique_types = [] %}
    {% for type in allEventTypes %}
      {% if type.nl and type.nl != "" and type.nl != blank %}
        {% unless unique_types contains type.nl %}
          {% assign unique_types = unique_types | push: type.nl %}

          {% assign matching_items = allEvents | where: "event.type_nl", type.nl %}
          {% assign items_with_image = matching_items | where_exp: "item", "item.imageUrl and item.imageUrl != ''" %}
          {% assign project_count = matching_items | size %}
          {% assign random_item = items_with_image | sample %}
          {% assign type_class = type.nl | downcase | replace: " ", "-" | replace: "'", "" | replace: ",", "" %}

          {% if random_item %}
            <li class="item" tabindex="0">
              <a href="/archive/{{ random_item.event.uuid }}">
                <div>
                  <strong>{{ project_count }} projects</strong>
                  <h2 class="type-label {{ type_class }}">{{ type.nl }}</h2>
                </div>
                <img src="{{ random_item.imageUrl }}" alt="{{ random_item.event.title_nl }}" class="category-image" loading="lazy">
              </a>
            </li>
          {% endif %}

        {% endunless %}
      {% endif %}
    {% endfor %}

  </ul>
</section> {% endcomment %}

</main>

{% endblock %}

