{% comment %} Div or section with two headers? {% endcomment %}

{% if lang == 'EN' %}
{% assign type = event.event.type_en %}
{% assign title = event.event.title_en %}
{% assign content = event.event.content_en %}
{% else %}
{% assign type = event.event.type_nl %}
{% assign title = event.event.title_nl %}
{% assign content = event.event.content_nl %}
{% endif %}

<a href="" class="back-arrow">
    <svg role="graphics-symbol" width="24" height="24" aria-labelledby="back-arrow" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M4 12L20 12" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
      <path d="M11.0325 4.33939L4.45961 10.9122C4.31606 11.0546 4.20206 11.224 4.12432 11.4108C4.04646 11.5975 4.00641 11.7977 4.00641 12C4.00641 12.2023 4.04646 12.4025 4.12432 12.5892C4.20206 12.776 4.31606 12.9454 4.45961 13.0877L11.0325 19.6606" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    <p id="back-arrow">
      {% if lang == "EN" %}
        Back
      {% else %}
        Terug
      {% endif %}
    </p>
</a>

<div class="details-position">
  <div class="details-wrapper">
  
    <details class="about" open name="about&relations-switch">
      <summary>
        {% if lang == 'EN' %}
        About
        {% else %}
        Over
        {% endif %}
      </summary>

      {% if event %}
        <h2>{{ title }}</h2>
      {% elsif person %}
        <section class="person">
          <h2>{{ person.person.name }}</h2>
          <a href="{{ person.person.guid }}" target="_blank">
            <svg role="graphics-symbol" width="24" height="24" aria-labelledby="artist-website" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 21.5C17.2467 21.5 21.5 17.2467 21.5 12C21.5 6.75329 17.2467 2.5 12 2.5C6.75329 2.5 2.5 6.75329 2.5 12C2.5 17.2467 6.75329 21.5 12 21.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12 21.5C14.3319 21.5 16.2222 17.2467 16.2222 12C16.2222 6.75329 14.3319 2.5 12 2.5C9.66812 2.5 7.77776 6.75329 7.77776 12C7.77776 17.2467 9.66812 21.5 12 21.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M2.5 12H21.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <p id="artist-website">
              {% if lang == 'EN' %}
                Artist's personal website
              {% else %}
                Persoonlijke website van de artiest
              {% endif %}
            </p>
            <svg role="graphics-symbol" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M17.6568 6.34315L6.34314 17.6569" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
              <path d="M18.101 16.7327L18.101 7.4373C18.1019 7.23513 18.0627 7.03471 17.9856 6.84767C17.9086 6.66062 17.7953 6.4907 17.6523 6.34768C17.5093 6.20465 17.3394 6.09137 17.1523 6.01443C16.9653 5.93732 16.7649 5.89814 16.5627 5.89898L7.2673 5.89899" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        </section>
      {% endif %}
      
      {% if event %}
      <ul>
        <li class="type">
          <h3>
            {% if lang == 'EN' %}
            Type
            {% else %}
            Type
            {% endif %}
          </h3>
          <ul>
            <li>
              {% if lang == 'EN' %}
                {{ type }}
              {% else %}
                {{ type_nl }}
              {% endif %}
            </li>
          </ul>
        </li>
        <li class="artist">
          {% comment %} Better element for this? {% endcomment %}
          <h3>
            {% if lang == 'EN' %}
            Artist
            {% else %}
            Artiest
            {% endif %}
          </h3>
          {% for rel in event.relationships %}
          {% if rel.node == "Person" %}
          {% for artist in allArtists %}
          {% if rel.uuid == artist.person.uuid %}
            <p>{{ artist.person.name }}</p>
          {% endif %}
          {% endfor %}
          {% endif %}
          {% endfor %}
        </li>
        <li>
          <h3>
            {% if lang == 'EN' %}
              Date
            {% else %}
              Datum
            {% endif %}
          </h3>
          {% comment %} {% if item.event.date_start == "null" or item.event.date_start == blank && item.event.date_end == nil or item.event.date_end == blank %} {% endcomment %}

          {% if item.event.date_start == "null" or item.event.date_start == blank %}
            {% if lang == 'EN' %}
              <p>One day event</p>
            {% else %}
              <p>Eendaags event</p>
            {% endif %}
          {% else %}
              <p>{{ item.event.date_start | date: "%-d %B %Y" }}</p>
          {% endif %}
          {% if item.event.date_end == nil or item.event.date_end == blank %}
                {% if lang == 'EN' %}
                <p>One day event</p>
                {% else %}
                <p>Eendaags event</p>
                {% endif %}
          {% else %}
                {% if lang == 'EN' %}
                  <p>till {{ item.event.date_end | date: "%-d %B %Y" }}</p>
                {% else %}
                  <p>t/m {{ item.event.date_end | date: "%-d %B %Y" }}</p>
                {% endif %}
          {% endif %}
        </li>
      </ul>
      <img src="{{ event.imageUrl }}" alt="Cover image of {{ event_title }}" class="category-image" loading="lazy">
      
      {% if lang == 'EN' %}
        <p>{{ content }}</p>
      {% else %}
        {% if content_nl == nil or content_nl == blank %}
          <p>Excuses, deze content is alleen beschikbaar in het Engels.</p>
          <p>{{ content_en }}</p>
        {% else %}
          <p>{{ content_nl }}</p>
        {% endif %}
      {% endif %}

    {% elsif person %}
        <ul>
          <li class="exhibitions">
            <h3>
              {% if lang == 'EN' %}
              Exhibitions
              {% else %}
              Exposities
              {% endif %}
          </h3>
          </li>
          <li class="date">
            <h3>
              {% if lang == 'EN' %}
              Year
              {% else %}
              Jaar
              {% endif %}
            </h3>
          <p>{{ event.event.year }}</p>
          </li>
        </ul>
        <img src="{{ person.imageUrl }}" {% if lang == 'EN' %}alt="Portrait picture of {{ person.person.name }}"{% else %}alt="Portrait picture of {{ person.person.name }}"{% endif %}  class="category-image" loading="lazy">
          
        {% if lang == 'EN' %}
          <p>{{ person.person.bio_en }}</p>
        {% else %}
          {% if person.person.bio_nl == nil or person.person.bio_nl == blank %}
            <p>Excuses, deze content is alleen beschikbaar in het Engels.</p>
            <p>{{ personm.person.bio_en }}</p>
          {% else %}
            <p>{{ person.person.bio_nl }}</p>
          {% endif %}
        {% endif %}
      {% endif %}
      <hr>
    </details>

    {% comment %} ///////////////////// {% endcomment %}
    {% comment %} 🔗🔗🔗 RELATIONS 🔗🔗🔗 {% endcomment %}
    {% comment %} ///////////////////// {% endcomment %}
     
    <details class="relations" name="about&relations-switch">
      <summary>
        {% if lang == 'EN' %}
        Related
        {% else %}
        Gerelateerd
        {% endif %}
      </summary>

      {% if event %}
      <h2>{{ title }}</h2>
      {% elsif person %}
      <h2>{{ artist.person.name }}</h2>
      {% endif %}

      {% comment %} //////////////////// {% endcomment %}
      {% comment %} 🎞️🎞️🎞️ REL LIST 🎞️🎞️🎞️ {% endcomment %}
      {% comment %} //////////////////// {% endcomment %}
      
      <ul class="relations-list">
       
      <li>
        {% if person %}
          {% for rel in person.relationships %}
            {% if rel.type == 'HAS_PARTICIPANT' %}
              {% for event in allEvents %}
                {% if rel.uuid == event.event.uuid %}
                  <a href="/{{ lang }}/archive/{{ event.event.uuid }}">
                    <img src="{{ event.imageUrl }}" class="relation-img" alt="Portrait picture of {{ artist.person.name }}, who has had a role in this {{ type }}">
                    <h3>{{ event.event.title_nl }}</h3>
                  </a>
                {% endif %}
              {% endfor %}
            {% endif %}
          {% endfor %}

          {% elsif event %}
            {% assign matchFound = false %}
            {% for rel in event.relationships %}
              {% if rel.node == "Person" %}
                {% for artist in allArtists %}
                  {% if rel.uuid == artist.person.uuid %}
                    {% assign matchFound = true %}
                    <a href="/{{ lang }}/archive/{{ rel.uuid }}">
                      <img src="{{ artist.imageUrl }}" class="relation-img" alt="Cover picture of {{ title }}, which has a relation to {{ artist.person.name }}">
                      <h3>{{ artist.person.name }}</h3>
                    </a>
                  {% endif %}
                {% endfor %}
              {% endif %}
            {% endfor %}
          
            {% if matchFound == false %}
              <svg role="img" xmlns="http://www.w3.org/2000/svg" width="92" height="80" id="empty-state-img" viewBox="0 0 92 80" fill="none">
                <title id="empty-state-title">
                  {% if lang == 'EN' %}
                    Sorry, no relations available
                  {% else %}
                    Excuses, er zijn geen relaties gevonden
                  {% endif %}
                </title>
                <path d="..." fill="black"/>  <!-- Afgekort voor leesbaarheid -->
              </svg>
              <h3>
                {% if lang == 'EN' %}
                  Sorry, there are no relations to this content!
                {% else %}
                  Excuses, er zijn geen relaties gevonden bij deze content!
                {% endif %}
              </h3>
            {% endif %}
          {% endif %}
          
        </li>
      </ul>

      {% comment %} <section class="relation-carousel">
        <input type="radio" id="radio-1" name="radio-card" checked>

        <article class="relation-content" style="--angle:4deg">
          {% for rel in event.relationships %}
          {% if rel.node == "Person" %}
          {% for artist in allArtists %}
          {% if rel.uuid == artist.person.uuid %}

          <img class="relation-image-carousel" src="{{ artist.imageUrl }}">
            <div class="relation-data">
              <span class="card-num" aria-label="relation">1/7</span>
              
                <h2>{{ artist.person.name }}</h2>
              <div class="labels">
                <label for="radio-7" aria-label="Previous">&#10094;</label>
                <label for="radio-2" aria-label="Next">&#10095;</label>
              </div>
            </div>
          {% endif %}
          {% endfor %}
          {% endif %}
          {% endfor %}
        </article>
      </section> {% endcomment %}

    </details>

  </div>
</div>